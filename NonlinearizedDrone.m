%% Define the ODE
function X_dot = NonlinearizedDrone(T, X, tk1, tk2, tk3, td1, td2, td3, rk1, rk2, rk3, rd1, rd2, rd3)

    % Define the inputs
    syms w1 w2 w3 w4

    % Write the state equation
    % if T < 6 && T > 1
    %     U = [230, 225, 230, 225]';
    % else
    %     U = [225, 225, 225, 225]';
    % end
    % U = [197, 250, 197, 250]';
    U = [225, 225, 225, 225]';
    
    % Substitute the inputs
    X_dot(1) = tk1(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(2) = tk2(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(3) = tk3(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(4) = td1(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(5) = td2(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(6) = td3(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(7) = rk1(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(8) = rk2(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(9) = rk3(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(10) = rd1(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(11) = rd2(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));
    X_dot(12) = rd3(X(1), X(2), X(3), X(4), X(5), X(6), X(7), X(8), X(9), X(10), X(11), X(12), U(1), U(2), U(3), U(4));

    X_dot = X_dot';
end 